# AI-RSS-Hub 项目文件清单

📅 **更新时间**: 2025-12-25
✅ **版本**: v1.0

---

## 📂 完整文件列表

### 根目录文件

| 文件名 | 类型 | 用途 | 是否同步 |
|--------|------|------|----------|
| `requirements.txt` | 配置 | Python 依赖列表 | ✅ 是 |
| `.env.example` | 模板 | 环境变量示例 | ✅ 是 |
| `.env` | 配置 | 实际环境变量 | ❌ 否（各环境独立） |
| `.gitignore` | Git | Git 忽略规则 | ✅ 是 |
| `README.md` | 文档 | 项目说明 | ✅ 是 |
| `SETUP.md` | 文档 | 安装部署指南 | ✅ 是 |
| `run.sh` | 脚本 | 快速启动脚本 | ✅ 是 |
| `start.sh` | 脚本 | 启动脚本 | ✅ 是 |
| `sync_to_deploy.sh` | 脚本 | 同步脚本 | ✅ 是 |
| `test_setup.py` | 测试 | 环境测试脚本 | ✅ 是 |
| `测试部署文件说明.txt` | 文档 | 部署指南（中文） | ✅ 是 |
| `开发部署隔离方案.md` | 文档 | 隔离方案说明 | ✅ 是 |
| `项目运行状态记录.md` | 文档 | 运行状态记录 | ✅ 是 |
| `项目文件清单.md` | 文档 | 本文件 | ✅ 是 |

### app/ 目录（应用代码）

| 文件路径 | 用途 | 说明 |
|---------|------|------|
| `app/__init__.py` | 包标识 | 空文件，标识为 Python 包 |
| `app/main.py` | 主程序 | FastAPI 应用入口，包含启动逻辑 |
| `app/config.py` | 配置管理 | 从环境变量读取配置，使用 pydantic-settings |
| `app/models.py` | 数据模型 | SQLModel 数据模型定义 (Feed, Article) |
| `app/database.py` | 数据库 | 数据库连接和会话管理 |
| `app/crud.py` | 数据操作 | CRUD 操作函数 |
| `app/scheduler.py` | 定时任务 | APScheduler 定时任务配置 |

### app/api/ 目录（API 路由）

| 文件路径 | 用途 | 说明 |
|---------|------|------|
| `app/api/__init__.py` | 包标识 | 空文件 |
| `app/api/routes.py` | API 路由 | 所有 REST API 端点定义 |

**已实现的 API 端点：**
- `GET /api/health` - 健康检查
- `GET /api/feeds` - 获取 RSS 源列表
- `POST /api/feeds` - 添加新 RSS 源
- `POST /api/feeds/fetch` - **手动触发 RSS 抓取** ⭐
- `GET /api/articles` - 获取文章列表

### app/services/ 目录（核心服务）

| 文件路径 | 用途 | 说明 |
|---------|------|------|
| `app/services/__init__.py` | 包标识 | 空文件 |
| `app/services/rss_fetcher.py` | RSS 抓取 | RSS 源抓取和解析逻辑 |
| `app/services/summarizer.py` | AI 总结 | AI 文本摘要生成服务 |

### 环境特定文件（不同步）

| 文件/目录 | 位置 | 用途 |
|----------|------|------|
| `venv/` | 部署目录 | Python 虚拟环境 |
| `.env` | 部署目录 | 环境配置（含 API Key） |
| `*.db` | 部署目录 | SQLite 数据库文件 |
| `__pycache__/` | 两个目录 | Python 字节码缓存 |
| `*.log` | 两个目录 | 日志文件 |

---

## 🗂️ 目录结构树

```
AI-RSS-Hub/
├── app/
│   ├── __init__.py
│   ├── main.py
│   ├── config.py
│   ├── models.py
│   ├── database.py
│   ├── crud.py
│   ├── scheduler.py
│   ├── api/
│   │   ├── __init__.py
│   │   └── routes.py
│   └── services/
│       ├── __init__.py
│       ├── rss_fetcher.py
│       └── summarizer.py
├── requirements.txt
├── .env.example
├── .gitignore
├── README.md
├── SETUP.md
├── run.sh
├── start.sh
├── sync_to_deploy.sh
├── test_setup.py
├── 测试部署文件说明.txt
├── 开发部署隔离方案.md
├── 项目运行状态记录.md
└── 项目文件清单.md

部署目录额外包含:
├── venv/              # 虚拟环境（不同步）
├── .env               # 环境配置（不同步）
└── ai_rss_hub.db      # 数据库（不同步）
```

---

## 📊 文件统计

### 代码文件
- Python 文件: 12 个
- 总代码行数: 约 800+ 行

### 配置文件
- 环境配置: 2 个 (.env.example, .env.template)
- 依赖配置: 1 个 (requirements.txt)
- Git 配置: 1 个 (.gitignore)

### 文档文件
- Markdown: 4 个
- 文本文件: 1 个

### 脚本文件
- Shell 脚本: 3 个
- Python 脚本: 1 个 (test_setup.py)

---

## 🔄 文件同步规则

### ✅ 需要同步的文件（开发 → 部署）

```bash
app/**/*.py          # 所有应用代码
*.md                 # 所有文档
*.txt                # 文本文件
*.sh                 # Shell 脚本
requirements.txt     # 依赖列表
.env.example         # 环境变量模板
.gitignore          # Git 忽略规则
```

### ❌ 不同步的文件/目录

```bash
venv/               # 虚拟环境
.env                # 环境配置
*.db                # 数据库文件
*.sqlite*           # SQLite 文件
__pycache__/        # Python 缓存
*.pyc               # 字节码
*.log               # 日志文件
*.swp               # Vim 临时文件
.DS_Store           # macOS 系统文件
.git/               # Git 仓库
```

---

## 🚀 文件用途说明

### main.py - 应用入口
- 创建 FastAPI 应用
- 注册 API 路由
- 配置 CORS
- 启动时初始化数据库
- 插入默认 RSS 源
- 启动定时任务

### config.py - 配置管理
- 从环境变量读取配置
- 提供默认值
- 使用 pydantic-settings 验证

### models.py - 数据模型
- Feed 模型（RSS 源）
- Article 模型（文章）
- 各种响应模型

### database.py - 数据库
- 创建数据库引擎
- 提供会话管理
- 初始化表结构

### crud.py - 数据操作
- Feed 的 CRUD 操作
- Article 的 CRUD 操作
- 查询和过滤功能

### scheduler.py - 定时任务
- 配置 APScheduler
- 定时抓取 RSS
- 启动时执行一次

### routes.py - API 路由
- 定义所有 REST API 端点
- 请求验证
- 错误处理

### rss_fetcher.py - RSS 抓取
- 解析 RSS 源
- 提取文章信息
- 去重逻辑
- 批量处理

### summarizer.py - AI 总结
- 调用 OpenAI API
- 生成中文摘要
- 错误处理
- 超时控制

---

## 📝 维护建议

### 添加新功能时
1. 在开发目录编写代码
2. 测试功能正常
3. Git 提交更改
4. 运行 `./sync_to_deploy.sh` 同步到部署目录
5. 更新本文档记录新文件

### 删除文件时
1. 从两个目录都删除
2. 更新本文档
3. 更新 .gitignore（如需要）

### 修改配置时
1. 修改 .env.example（模板）
2. 手动更新各环境的 .env 文件
3. 不要直接复制 .env 文件

---

## 🔍 快速查找

### 想修改 API 端点？
→ `app/api/routes.py`

### 想修改 RSS 抓取逻辑？
→ `app/services/rss_fetcher.py`

### 想修改 AI 总结逻辑？
→ `app/services/summarizer.py`

### 想修改数据模型？
→ `app/models.py`

### 想修改配置？
→ `app/config.py` 和 `.env`

### 想修改定时任务？
→ `app/scheduler.py`

---

**文档维护**: Claude Code
**更新频率**: 文件结构变化时更新
